import React, { useState } from 'react'
import axios from 'axios'
const API = import.meta.env.VITE_API_URL || 'http://localhost:4000'
export default function Login({ onLogin }) { const [email,setEmail]=useState(''); const [pass,setPass]=useState(''); const doRegister=async()=>{ if(!email||!pass) return alert('Preencha os campos'); const r=await axios.post(API+'/api/register',{email,password:pass}).catch(e=>null); if(r?.data?.token) onLogin(r.data.token); else alert('Erro ao registrar') }; const doLogin=async()=>{ if(!email||!pass) return alert('Preencha os campos'); const r=await axios.post(API+'/api/login',{email,password:pass}).catch(e=>null); if(r?.data?.token) onLogin(r.data.token); else alert('Credenciais inválidas') }; return (<div className="max-w-md mx-auto"><div className="card p-8"><h2 className="text-2xl font-bold mb-2">Bem-vindo</h2><p className="text-sm text-white/70 mb-4">Entre ou registre-se para começar (demo).</p><input className="w-full p-3 rounded-md mb-3 bg-white/6" placeholder="email" value={email} onChange={e=>setEmail(e.target.value)} /><input className="w-full p-3 rounded-md mb-3 bg-white/6" placeholder="senha" type="password" value={pass} onChange={e=>setPass(e.target.value)} /><div className="flex gap-3"><button onClick={doLogin} className="btn">Login</button><button onClick={doRegister} className="small-btn">Registrar</button></div></div><p className="text-center text-sm text-white/60 mt-4">Este é um ambiente de teste — sem dinheiro real.</p></div>)}
